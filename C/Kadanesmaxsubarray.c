#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <limits.h>

typedef struct res{
    int i;
    int j;
    int sum;
}res;



//Maxsubarray function
res maxSubArray(int *A,int n){
    res maxCurr, maximum, *r;
    r = malloc(sizeof(res *));
    
    
    if(n<2){                                //if the size of the array is less than 2
        r->i =0; r->j=0; r->sum=A[r->i]+A[r->j];
        return r[0];
    }
    else {
        maxCurr.sum = -1 * INT_MAX;          //set to -infinity
        maximum.sum = -1 * INT_MAX;          //set to -infinity
        
        int i; int j;
        
        //------------------STARTING LOOP----------------------->
        for (i=0;i<n;i++){
            if(maxCurr.sum<0){
                maxCurr.i = i; maxCurr.j=i; maxCurr.sum = A[i];
            }
            
            else{
                maxCurr.sum += A[i];
                maxCurr.j=i;
            }
            if(maximum.sum<maxCurr.sum){
                maximum = maxCurr;
            }
            r[i] =maximum;
        }
        
     return r[n-1];   
    }
}


int main(){
    int A[] = {-412, -158, -24, 73, 30, -389, -316, -120, 71, -406, -359, -337, 72, -358, -73, 79, -75, -186, -23, -121, 77, -399, -476, -402, 71, -332, 10, -184, -276, -466, 0, -438, -470, -409, -298, -282, -143, -69, -399, 3, 24, 68, -248, -136, -9, -496, -340, -291, -281, -357, -475, -17, -52, -492, -70, -91, -20, -373, -275, -271, -349, -103, -178, -388, -51, 86, -69, 88, 22, -134, -74, 65, -453, -239, -253, -71, 89, -456, -117, -188, -191, -18, 2, -102, -60, 24, 85, -459, -193, -295, -480, -346, 3, -43, -379, -464, -481, -370, -318, -156, -361, -222, -347, 80, -55, 52, -166, -369, -159, -414, -365, 9, -375, -94, -364, -314, 80, -297, -271, -121, -192, -119, 76, -324, -234, -41, 17, -248, -56, -78, -79, -72, 84, -38, -180, -109, 14, -377, -392, -60, -409, -282, -218, 85, -493, -474, -190, -177, -327, -292, -385, -64, -129, -219, -256, -87, -383, -121, 46, -467, 42, 0, -194, -403, -305, 37, -410, -78, -142, -288, 54, 45, -351, -219, 25, -27, -284, -133, -80, -104, -215, -468, -369, -418, 63, -357, -43, -295, -57, 28, -412, -182, -489, -101, -265, -451, -213, -485, -178, 43, -352, -198, 39, 18, -24, -188, -106, 8, -377, -345, -284, -497, -130, 31, -4, -283, -106, -153, -166, -162, -398, -188, -465, -478, 15, -300, -177, -201, -170, -106, -336, -312, -388, -36, -390, 70, -25, -440, -181, -78, -172, -359, -253, -72, 81, -117, -176, -378, -263, -479, -226, -161, 62, -264, -492, -332, -160, 67, -195, -265, 11, -96, -133, -301, -282, -395, 8, -78, -365, -325, -394, -199, -88, -496, 100, -147, -476, -18, -480, 85, -407, -131, 100, -109, -165, -419, -309, -170, 50, 4, -469, -433, 55, -458, -216, -149, -137, 12, 95, -153, -44, -125, -18, 74, -499, -391, 17, -119, 7, -149, -377, -274, -499, -255, -278, -455, -389, -101, -148, -251, -273, -458, -215, -295, -122, -500, -32, -197, -499, -374, -409, -342, -219, -460, -439, -399, -289, -53, -458, -203, -108, -422, -185, -336, -435, 29, -484, -16, -83, -205, -191, -444, 36, -482, 0, -364, -224, 94, -270, -38, 64, -203, -328, -204, 50, -413, -143, -434, -174, 24, -17, -324, -292, 48, -384, -120, -152, -382, -10, -62, -361, -214, -361, -41, -163, -402, 42, -194, 5, 37, 39, 28, -286, -280, -104, 28, -218, -386, -51, 13, -97, -161, -131, -171, -376, -228, -168, -12, -426, -234, -323, -438, 84, -235, -445, 82, -51, -227, -306, 58, -482, -3, -258, -465, 65, -214, -55, -376, -94, -227, 92, 49, -334, 46, -462, -282, 79, 7, -400, -435, -107, -93, 77, -194, -290, -144, 79, -477, -140, -154, -237, -35, -333, -257, -39, -359, -232, -71, -247, -388, -22, -282, -163, -193, -445, -66, 86, -340, -200, -38, -256, -218, -170, -486, -387, 16, -79, -235, -283, -479, -449, 44, -254, -266, 63, 75, -418, -494, -65, -87, 66, -402, 94, -276, -452, -488, -438, -441, -77, -52, -54, -408, -472, -8, -150, 88, -127, 98, -159, -10, 24, -484, -138, -323, -117, -118, 30, -458, 60, -33, -462, -301, 76, -102, -262, -338, -224, 8, -87, 14, -154, -340, -152, -124, -55, -126, -457, -366, 81, -441, -79, -365, -417, -192, -14, -406, 74, -216, -269, -346, 56, 57, -171, -339, -157, -436, -340, -139, 28, -82, -235, -269, -31, -370, -136, -289, -110, -440, -320, -306, -319, 88, -409, 10, -9, -257, -58, -390, -148, 46, -162, -439, -145, -376, -430, -116, -303, -60, -80, -453, -17, -230, -157, 89, -215, -492, -280, -263, 70, -495, -236, 34, -107, -400, -455, -347, -376, -128, -56, 36, -483, -375, -44, -400, -24, -23, -27, -130, -264, 50, -15};
    //int A[] = { -120, -202, -293, -60, -261, -67, 10, 82, -334, -393, -428, -182, -138, -167, -465, -347, -39, -51, -61, -491, -216, -36, -281, -361, -271, -368, -122, -114, -53, -488, -327, -182, -221, -381, -431, -161, -59, -494, -406, -298, -268, -425, -88, -320, -371, -5, 36, 89, -194, -140, -278, -65, -38, -144, -407, -235, -426, -219, 62, -299, 1, -454, -247, -146, 24, 2, -59, -389, -77, -19, -311, 18, -442, -186, -334, 41, -84, 21, -100, 65, -491, 94, -346, -412, -371, 89, -56, -365, -249, -454, -226, -473, 91, -412, -30, -248, -36, -95, -395, -74, -432, 47, -259, -474, -409, -429, -215, -102, -63, 80, 65, 63, -452, -462, -449, 87, -319, -156, -82, 30, -102, 68, -472, -463, -212, -267, -302, -471, -245, -165, 43, -288, -379, -243, 35, -288, 62, 23, -444, -91, -24, -110, -28, -305, -81, -169, -348, -184, 79, -262, 13, -459, -345, 70, -24, -343, -308, -123, -310, -239, 83, -127, -482, -179, -11, -60, 35, -107, -389, -427, -210, -238, -184, 90, -211, -250, -147, -272, 43, -99, 87, -267, -270, -432, -272, -26, -327, -409, -353, -475, -210, -14, -145, -164, -300, -327, -138, -408, -421, -26, -375, -263, 7, -201, -22, -402, -241, 67, -334, -452, -367, -284, -95, -122, -444, -456, -152, 25, 21, 61, -320, -87, 98, 16, -124, -299, -415, -273, -200, -146, -437, -457, 75, 84, -233, -54, -292, -319, -99, -28, -97, -435, -479, -255, -234, -447, -157, 82, -450, 86, -478, -58, 9, -500, -87, 29, -286, -378, -466, 88, -366, -425, -38, -134, -184, 32, -13, -263, -371, -246, 33, -41, -192, -14, -311, -478, -374, -186, -353, -334, -265, -169, -418, 63, 77, 77, -197, -211, -276, -190, -68, -184, -185, -235, -31, -465, -297, -277, -456, -181, -219, -329, 40, -341, -476, 28, -313, -78, -165, -310, -496, -450, -318, -483, -22, -84, 83, -185, -140, -62, -114, -141, -189, -395, -63, -359, 26, -318, 86, -449, -419, -2, 81, -326, -339, -56, -123, 10, -463, 41, -458, -409, -314, -125, -495, -256, -388, 75, 40, -37, -449, -485, -487, -376, -262, 57, -321, -364, -246, -330, -36, -473, -482, -94, -63, -414, -159, -200, -13, -405, -268, -455, -293, -298, -416, -222, -207, -473, -377, -167, 56, -488, -447, -206, -215, -176, 76, -304, -163, -28, -210, -18, -484, 45, 10, 79, -441, -197, -16, -145, -422, -124, 79, -464, -60, -214, -457, -400, -36, 47, 8, -151, -489, -327, 85, -297, -395, -258, -31, -56, -500, -61, -18, -474, -426, -162, -79, 25, -361, -88, -241, -225, -367, -440, -200, 38, -248, -429, -284, -23, 19, -220, -105, -81, -269, -488, -204, -28, -138, 39, -389, 40, -263, -297, -400, -158, -310, -270, -107, -336, -164, 36, 11, -192, -359, -136, -230, -410, -66, 67, -396, -146, -158, -264, -13, -15, -425, 58, -25, -241, 85, -82, -49, -150, -37, -493, -284, -107, 93, -183, -60, -261, -310, -380};
    int n = sizeof(A)/sizeof(A[0]);
    
    res r;// = malloc(sizeof(res));
    
    r = maxSubArray(A,n);
    printf("The max subarray in  the above array is from position %d to %d and value %d",r.i,r.j,r.sum);
    
    return 0;
}

//The max subarray in  the above array is from position 3 to 6 and value 6   